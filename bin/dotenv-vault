#!/bin/bash

ROOT_DIR=`cd $(dirname $0); pwd`/..

if [ -e $ROOT_DIR/src/dotenv-vault.sh ]; then
    source $ROOT_DIR/src/dotenv-vault.sh
elif [ -e ~/.dotenv-vault/src/dotenv-vault.sh ]; then
    source ~/.dotenv-vault/src/dotenv-vault.sh
else
    echo 'No lib dotenv-vault/src/dotenv-vault.sh found' 1>&2
    exit 2
fi


command=$1

dotenv-vault::help() {
    echo 'usage: dotenv-vault' 1>&2
    echo '    encrypt FILE' 1>&2
    echo '    decrypt FILE' 1>&2
    echo '    create|generate KEY=VALUE' 1>&2
}

case $command in
    'encrypt') dotenv-vault::encrypt $@ ;;
    'decrypt') dotenv-vault::decrypt $@ ;;
    'create') dotenv-vault::create $@ ;;
    'generate') dotenv-vault::create $@ ;;
    *) dotenv-vault::help ;;
esac
